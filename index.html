
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }
        .leaflet-container { font-size: 1rem; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        var map = L.map("map", {
            center: [33.8416, 132.7657],
            zoom: 10,
            zoomControl: true,
            preferCanvas: false,
        });

        L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution: "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",
            maxZoom: 19,
        }).addTo(map);

        var hospitals = [{'施設名': '岸田メディカルクリニック', 'fX': 133.57115, 'fY': 33.99033, '胃': '■', '大腸': '■'}, {'施設名': '公立学校共済組合四国中央病院', 'fX': 133.58151, 'fY': 34.01097, '胃': '■', '大腸': '■'}, {'施設名': '生協宇摩診療所', 'fX': 133.50734, 'fY': 33.96728, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000康仁会\u3000西岡病院', 'fX': 133.5374, 'fY': 33.98042, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000明生会\u3000長谷川病院', 'fX': 133.57983, 'fY': 33.99767, '胃': '■', '大腸': nan}, {'施設名': '胃腸科内科\u3000松村クリニック', 'fX': 133.30231, 'fY': 33.92277, '胃': '■', '大腸': '■'}, {'施設名': '医療法人岩﨑病院', 'fX': 133.28384, 'fY': 33.93067, '胃': '■', '大腸': '■'}, {'施設名': '愛媛県立新居浜病院', 'fX': 133.28004, 'fY': 33.93279, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000大橋胃腸肛門科外科医院', 'fX': 133.33994, 'fY': 33.93045, '胃': '■', '大腸': '■'}, {'施設名': '一般財団法人積善会\u3000十全総合病院', 'fX': 133.27301, 'fY': 33.95904, '胃': '■', '大腸': '■'}, {'施設名': '住友別子病院', 'fX': 133.26268, 'fY': 33.95398, '胃': '■', '大腸': '■'}, {'施設名': '田坂外科医院', 'fX': 133.30658, 'fY': 33.93409, '胃': '■', '大腸': nan}, {'施設名': '医療法人社団久和会\u3000立花病院', 'fX': 133.30228, 'fY': 33.93526, '胃': '■', '大腸': '■'}, {'施設名': '愛媛医療生活協同組合\u3000新居浜協立病院', 'fX': 133.27878, 'fY': 33.96638, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000三木医院', 'fX': 133.31784, 'fY': 33.98194, '胃': '■', '大腸': nan}, {'施設名': '宮田内科', 'fX': 133.31833, 'fY': 33.9696, '胃': '■', '大腸': nan}, {'施設名': '西条市立周桑病院', 'fX': 133.07858, 'fY': 33.93288, '胃': '■', '大腸': '■'}, {'施設名': '西条中央病院', 'fX': 133.18147, 'fY': 33.9291, '胃': '■', '大腸': '■'}, {'施設名': '社会福祉法人恩賜財団済生会西条病院', 'fX': 133.1915, 'fY': 33.9285, '胃': '■', '大腸': '■'}, {'施設名': 'としもり内科', 'fX': 133.20654, 'fY': 33.9268, '胃': '■', '大腸': nan}, {'施設名': '社会医療法人\u3000社団更生会\u3000村上記念病院', 'fX': 133.18988, 'fY': 33.91493, '胃': '■', '大腸': '■'}, {'施設名': '行本医院', 'fX': 133.05765, 'fY': 33.95351, '胃': '■', '大腸': nan}, {'施設名': '横山病院', 'fX': 133.11357, 'fY': 33.89627, '胃': '■', '大腸': nan}, {'施設名': '医療法人社団門の内会\u3000渡部病院', 'fX': 133.08716, 'fY': 33.92583, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000あおのクリニック', 'fX': 132.84669, 'fY': 34.03826, '胃': '■', '大腸': '■'}, {'施設名': '有津むらかみクリニック', 'fX': 133.08821, 'fY': 34.20303, '胃': '■', '大腸': '■'}, {'施設名': '医療法人社団銀杏会井出内科', 'fX': 132.98755, 'fY': 34.05596, '胃': '■', '大腸': nan}, {'施設名': '井戸内科・消化器科', 'fX': 132.99936, 'fY': 34.05758, '胃': '■', '大腸': nan}, {'施設名': '社会医療法人\u3000真泉会\u3000今治第一病院', 'fX': 132.98912, 'fY': 34.06712, '胃': '■', '大腸': '■'}, {'施設名': '医療法人大樹会\u3000今治南病院', 'fX': 132.98515, 'fY': 34.03366, '胃': '■', '大腸': '■'}, {'施設名': '愛媛県立今治病院', 'fX': 132.98715, 'fY': 34.08552, '胃': '■', '大腸': '■'}, {'施設名': '医療法人良仁会\u3000大三島中央病院', 'fX': 133.02538, 'fY': 34.23903, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000片山医院', 'fX': 133.03981, 'fY': 34.14597, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000喜多嶋診療所', 'fX': 133.11183, 'fY': 34.20621, '胃': '■', '大腸': '■'}, {'施設名': '木原病院', 'fX': 132.99467, 'fY': 34.0693, '胃': '■', '大腸': '■'}, {'施設名': '社会福祉法人恩賜財団\u3000済生会今治病院', 'fX': 133.02068, 'fY': 34.04457, '胃': '■', '大腸': '■'}, {'施設名': '医療法人さとう内科クリニック', 'fX': 132.99199, 'fY': 34.08054, '胃': '■', '大腸': nan}, {'施設名': 'Gクリニック', 'fX': 132.98947, 'fY': 34.05846, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000慈風会\u3000白石病院', 'fX': 133.00085, 'fY': 34.06554, '胃': '■', '大腸': '■'}, {'施設名': '社会医療法人人生生きる会\u3000瀬戸内海病院', 'fX': 132.9939, 'fY': 34.06594, '胃': '■', '大腸': '■'}, {'施設名': '高山内科病院', 'fX': 132.9969, 'fY': 34.07046, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000竹内外科胃腸科', 'fX': 132.99808, 'fY': 34.04931, '胃': '■', '大腸': '■'}, {'施設名': 'はかた外科胃腸科', 'fX': 133.07913, 'fY': 34.20838, '胃': '■', '大腸': nan}, {'施設名': '医療法人波止浜内科・外科', 'fX': 132.96158, 'fY': 34.10345, '胃': '■', '大腸': nan}, {'施設名': '平林胃腸クリニック', 'fX': 132.9924, 'fY': 34.0482, '胃': '■', '大腸': '■'}, {'施設名': '広瀬クリニック', 'fX': 133.02513, 'fY': 34.04253, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000陽成会\u3000広瀬病院', 'fX': 133.02368, 'fY': 34.04293, '胃': '■', '大腸': '■'}, {'施設名': '医療法人まつもとクリニック', 'fX': 132.99638, 'fY': 34.07007, '胃': '■', '大腸': '■'}, {'施設名': '医療法人彩水会\u3000真部クリニック', 'fX': 132.97066, 'fY': 34.05963, '胃': '■', '大腸': nan}, {'施設名': '医療法人平成会\u3000山内病院', 'fX': 132.98489, 'fY': 34.05204, '胃': '■', '大腸': nan}, {'施設名': 'あさの胃腸内科クリニック', 'fX': 132.78006, 'fY': 33.83012, '胃': '■', '大腸': '■'}, {'施設名': '医療法人いずみ診療所', 'fX': 132.7935, 'fY': 33.80828, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000いちかわ内視鏡内科クリニック', 'fX': 132.78477, 'fY': 33.82819, '胃': '■', '大腸': '■'}, {'施設名': '稲田内科消化器科医院', 'fX': 132.74835, 'fY': 33.87322, '胃': '■', '大腸': nan}, {'施設名': '今在家クリニック', 'fX': 132.79321, 'fY': 33.80425, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000岩﨑内科', 'fX': 132.76158, 'fY': 33.84842, '胃': '■', '大腸': '■'}, {'施設名': '宇佐美消化器クリニック', 'fX': 132.76596, 'fY': 33.81791, '胃': '■', '大腸': '■'}, {'施設名': '浦岡胃腸クリニック', 'fX': 132.79056, 'fY': 33.8432, '胃': '■', '大腸': '■'}, {'施設名': '愛媛県立中央病院', 'fX': 132.76511, 'fY': 33.83284, '胃': '■', '大腸': '■'}, {'施設名': '愛媛県厚生連健診センター', 'fX': 132.81479, 'fY': 33.81514, '胃': '■', '大腸': '■'}, {'施設名': '愛媛生協病院', 'fX': 132.79839, 'fY': 33.80903, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000同仁会\u3000おおぞら病院', 'fX': 132.75229, 'fY': 33.85125, '胃': '■', '大腸': '■'}, {'施設名': '大手町クリニック', 'fX': 132.75674, 'fY': 33.83935, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000岡部クリニック', 'fX': 132.71434, 'fY': 33.81313, '胃': '■', '大腸': '■'}, {'施設名': '医療法人団伸会\u3000奥島病院', 'fX': 132.7821, 'fY': 33.84819, '胃': '■', '大腸': '■'}, {'施設名': 'かしもと内科・胃と腸の内視鏡クリニック\u3000松山', 'fX': 132.80469, 'fY': 33.80933, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000北吉田診療所', 'fX': 132.70459, 'fY': 33.8378, '胃': '■', '大腸': '■'}, {'施設名': '窪田クリニック消化器科外科肛門科', 'fX': 132.76025, 'fY': 33.81494, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000くめ内科クリニック', 'fX': 132.72717, 'fY': 33.85307, '胃': '■', '大腸': '■'}, {'施設名': '久米病院', 'fX': 132.80167, 'fY': 33.81245, '胃': '■', '大腸': nan}, {'施設名': '興居島診療所', 'fX': 132.67194, 'fY': 33.9055, '胃': '■', '大腸': '■'}, {'施設名': 'こみなと胃腸内科', 'fX': 132.78406, 'fY': 33.80408, '胃': '■', '大腸': '■'}, {'施設名': '社会福祉法人恩賜財団\u3000済生会松山病院', 'fX': 132.72102, 'fY': 33.85252, '胃': '■', '大腸': '■'}, {'施設名': '独立行政法人国立病院機構\u3000四国がんセンター', 'fX': 132.84105, 'fY': 33.79733, '胃': '■', '大腸': '■'}, {'施設名': 'すがクリニック消化器内科・婦人科', 'fX': 132.7662, 'fY': 33.83721, '胃': '■', '大腸': '■'}, {'施設名': '鷹の子病院', 'fX': 132.81595, 'fY': 33.81342, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000束村内科医院', 'fX': 132.71753, 'fY': 33.85624, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000鶴井消化器科・内科・外科', 'fX': 132.77922, 'fY': 33.80974, '胃': '■', '大腸': '■'}, {'施設名': '土居外科胃腸科医院', 'fX': 132.84021, 'fY': 33.81319, '胃': '■', '大腸': '■'}, {'施設名': 'どい消化器内科クリニック', 'fX': 132.72847, 'fY': 33.83676, '胃': '■', '大腸': '■'}, {'施設名': '徳山内科', 'fX': 132.71799, 'fY': 33.86909, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000和光会土橋共立病院', 'fX': 132.75703, 'fY': 33.83242, '胃': '■', '大腸': '■'}, {'施設名': 'とよしま胃腸内科クリニック', 'fX': 132.7765, 'fY': 33.84767, '胃': '■', '大腸': '■'}, {'施設名': '中川病院', 'fX': 132.8425, 'fY': 33.79808, '胃': '■', '大腸': '■'}, {'施設名': '西川内科・消化器クリニック', 'fX': 132.77544, 'fY': 33.8444, '胃': '■', '大腸': '■'}, {'施設名': 'にのみや消化器科内科小児科', 'fX': 132.84021, 'fY': 33.81319, '胃': '■', '大腸': '■'}, {'施設名': '医療法人社団\u3000久野内科', 'fX': 132.77989, 'fY': 33.84111, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000日野内科・消化器科', 'fX': 132.73892, 'fY': 33.81771, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000福本外科クリニック', 'fX': 132.75539, 'fY': 33.83253, '胃': '■', '大腸': '■'}, {'施設名': '船津内科胃腸科クリニック', 'fX': 132.77364, 'fY': 33.84769, '胃': '■', '大腸': '■'}, {'施設名': 'ふるかわ内科クリニック', 'fX': 132.76459, 'fY': 33.80544, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000星島内科医院', 'fX': 132.72047, 'fY': 33.81743, '胃': '■', '大腸': nan}, {'施設名': '医療法人一朋会\u3000増田病院', 'fX': 132.76419, 'fY': 33.86209, '胃': '■', '大腸': nan}, {'施設名': '松山協和病院', 'fX': 132.77173, 'fY': 33.82798, '胃': '■', '大腸': '■'}, {'施設名': '松山市民病院', 'fX': 132.75412, 'fY': 33.83953, '胃': '■', '大腸': '■'}, {'施設名': '医療法人社団\u3000慈生会\u3000松山城東病院', 'fX': 132.78821, 'fY': 33.82707, '胃': '■', '大腸': '■'}, {'施設名': '松山赤十字病院', 'fX': 132.77368, 'fY': 33.84844, '胃': '■', '大腸': '■'}, {'施設名': '松山第一病院', 'fX': 132.74783, 'fY': 33.8596, '胃': '■', '大腸': '■'}, {'施設名': '松山西病院', 'fX': 132.72656, 'fY': 33.82181, '胃': '■', '大腸': '■'}, {'施設名': '社会医療法人真泉会\u3000松山まどんな病院', 'fX': 132.77344, 'fY': 33.84393, '胃': '■', '大腸': '■'}, {'施設名': '宮内消化器科内科', 'fX': 132.806, 'fY': 33.85163, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000三宅内科胃腸科', 'fX': 132.75352, 'fY': 33.82134, '胃': '■', '大腸': '■'}, {'施設名': '村上胃腸内科クリニック', 'fX': 132.75615, 'fY': 33.83364, '胃': '■', '大腸': '■'}, {'施設名': 'やいた内科・内視鏡クリニック', 'fX': 132.79871, 'fY': 33.84101, '胃': '■', '大腸': '■'}, {'施設名': '矢野内科', 'fX': 132.75273, 'fY': 33.86847, '胃': '■', '大腸': '■'}, {'施設名': '矢野内科クリニック', 'fX': 132.82089, 'fY': 33.86452, '胃': '■', '大腸': '■'}, {'施設名': '山下消化器外科クリニック', 'fX': 132.74194, 'fY': 33.86781, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000山中内科・消化器内科クリニック', 'fX': 132.7487, 'fY': 33.89251, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000友愛医院', 'fX': 132.82983, 'fY': 33.79942, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000吉野内科', 'fX': 132.75241, 'fY': 33.88296, '胃': '■', '大腸': '■'}, {'施設名': '医療法人ミネルワ会\u3000渡辺病院', 'fX': 132.7269, 'fY': 33.82782, '胃': '■', '大腸': '■'}, {'施設名': '医療法人萌生会\u3000稲田内科医院', 'fX': 132.70813, 'fY': 33.76715, '胃': '■', '大腸': nan}, {'施設名': '伊予病院', 'fX': 132.77034, 'fY': 33.78338, '胃': '■', '大腸': '■'}, {'施設名': '医療法人わのわ会\u3000佐礼谷診療所', 'fX': 132.73177, 'fY': 33.68792, '胃': '■', '大腸': nan}, {'施設名': 'たなか消化器科クリニック', 'fX': 132.70769, 'fY': 33.76439, '胃': '■', '大腸': '■'}, {'施設名': '独立行政法人国立病院機構\u3000愛媛医療センター', 'fX': 132.88118, 'fY': 33.79762, '胃': '■', '大腸': '■'}, {'施設名': '愛媛大学医学部附属病院', 'fX': 132.87924, 'fY': 33.80281, '胃': '■', '大腸': '■'}, {'施設名': '梶原クリニック', 'fX': 132.74951, 'fY': 33.78541, '胃': '■', '大腸': '■'}, {'施設名': '武智ひ尿器科・内科', 'fX': 132.72438, 'fY': 33.79594, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000かどた内科', 'fX': 132.79674, 'fY': 33.78151, '胃': '■', '大腸': nan}, {'施設名': '大洲記念病院', 'fX': 132.58299, 'fY': 33.5311, '胃': '■', '大腸': '■'}, {'施設名': '大洲市国民健康保険河辺診療所', 'fX': 132.7419, 'fY': 33.48437, '胃': '■', '大腸': nan}, {'施設名': '社会医療法人\u3000北斗会\u3000大洲中央病院', 'fX': 132.55098, 'fY': 33.51608, '胃': '■', '大腸': '■'}, {'施設名': 'こじま内科', 'fX': 132.55098, 'fY': 33.51608, '胃': '■', '大腸': '■'}, {'施設名': '市立大洲病院', 'fX': 132.53003, 'fY': 33.50053, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000平田胃腸科肛門科', 'fX': 132.54922, 'fY': 33.52151, '胃': '■', '大腸': nan}, {'施設名': 'みやうち医院', 'fX': 132.58633, 'fY': 33.5202, '胃': '■', '大腸': nan}, {'施設名': '村上内科医院', 'fX': 132.54655, 'fY': 33.49439, '胃': '■', '大腸': nan}, {'施設名': '小川医院', 'fX': 132.64787, 'fY': 33.55173, '胃': '■', '大腸': nan}, {'施設名': '古川医院', 'fX': 132.64787, 'fY': 33.55173, '胃': '■', '大腸': nan}, {'施設名': '浅田内科医院', 'fX': 132.4234, 'fY': 33.46027, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000加藤内科', 'fX': 132.43208, 'fY': 33.45543, '胃': '■', '大腸': '■'}, {'施設名': '鎌田内科消化器科クリニック', 'fX': 132.42226, 'fY': 33.45917, '胃': '■', '大腸': '■'}, {'施設名': '市立八幡浜総合病院', 'fX': 132.42674, 'fY': 33.46815, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000永松内科医院', 'fX': 132.39682, 'fY': 33.47952, '胃': '■', '大腸': nan}, {'施設名': 'あじき医院', 'fX': 132.43469, 'fY': 33.32222, '胃': '■', '大腸': nan}, {'施設名': '宇都宮内科', 'fX': 132.64194, 'fY': 33.37444, '胃': '■', '大腸': nan}, {'施設名': '宇都宮内科クリニック', 'fX': 132.51151, 'fY': 33.36377, '胃': '■', '大腸': '■'}, {'施設名': 'おか医院', 'fX': 132.64909, 'fY': 33.38417, '胃': '■', '大腸': nan}, {'施設名': 'かどた医院', 'fX': 132.5248, 'fY': 33.35789, '胃': '■', '大腸': '■'}, {'施設名': '近藤医院', 'fX': 132.5085, 'fY': 33.36726, '胃': '■', '大腸': '■'}, {'施設名': '西予市立西予市民病院', 'fX': 132.49411, 'fY': 33.37889, '胃': '■', '大腸': '■'}, {'施設名': '西予市立野村病院', 'fX': 132.63876, 'fY': 33.37147, '胃': '■', '大腸': '■'}, {'施設名': '樋口内科皆江診療所', 'fX': 132.41385, 'fY': 33.33672, '胃': '■', '大腸': nan}, {'施設名': '医療法人社団みのり会\u3000三瓶病院', 'fX': 132.42061, 'fY': 33.38374, '胃': '■', '大腸': '■'}, {'施設名': '宇和島市立津島病院', 'fX': 132.51973, 'fY': 33.1225, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000口羽外科胃腸科医院', 'fX': 132.51973, 'fY': 33.1225, '胃': '■', '大腸': nan}, {'施設名': 'しませ医院', 'fX': 132.54758, 'fY': 33.19322, '胃': '■', '大腸': nan}, {'施設名': '市立宇和島病院', 'fX': 132.56526, 'fY': 33.21628, '胃': '■', '大腸': '■'}, {'施設名': '清家消化器内科クリニック', 'fX': 132.5647, 'fY': 33.22341, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000友松外科・胃腸科', 'fX': 132.56581, 'fY': 33.2272, '胃': '■', '大腸': nan}, {'施設名': '医療法人\u3000橋本内科クリニック', 'fX': 132.53677, 'fY': 33.28864, '胃': '■', '大腸': nan}, {'施設名': 'ますだクリニック', 'fX': 132.57742, 'fY': 33.23072, '胃': '■', '大腸': nan}, {'施設名': '松野町国民健康保険中央診療所', 'fX': 132.7173, 'fY': 33.2378, '胃': '■', '大腸': nan}, {'施設名': '大野内科医院', 'fX': 132.67577, 'fY': 33.25706, '胃': '■', '大腸': nan}, {'施設名': '鬼北町立北宇和病院', 'fX': 132.68515, 'fY': 33.25779, '胃': '■', '大腸': '■'}, {'施設名': '篠原医院', 'fX': 132.67953, 'fY': 33.25377, '胃': '■', '大腸': nan}, {'施設名': '愛南町国保一本松病院', 'fX': 132.64877, 'fY': 32.96186, '胃': '■', '大腸': nan}, {'施設名': '愛媛県立南宇和病院', 'fX': 132.58575, 'fY': 32.96336, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000竹本医院', 'fX': 132.58128, 'fY': 32.9678, '胃': '■', '大腸': '■'}, {'施設名': '医療法人\u3000松本クリニック', 'fX': 132.64877, 'fY': 32.96186, '胃': '■', '大腸': '■'}];

        hospitals.forEach(function(hospital) {
            var screenings = [];
            if (hospital['胃']) {
                screenings.push('胃がん');
            }
            if (hospital['大腸']) {
                screenings.push('大腸がん');
            }
            var screeningsText = screenings.join('、');
            var color = 'gray';
            if (screenings.includes('胃がん') && screenings.includes('大腸がん')) {
                color = 'red';
            } else if (screenings.includes('胃がん')) {
                color = 'blue';
            } else if (screenings.includes('大腸がん')) {
                color = 'green';
            }
            var marker = L.marker([hospital.fY, hospital.fX], {
                icon: L.AwesomeMarkers.icon({
                    icon: 'info-sign',
                    markerColor: color,
                    prefix: 'glyphicon'
                })
            }).addTo(map);
            var popupContent = `<div style='width: 300px;'><b>${hospital['施設名']}</b><br>がん検診: ${screeningsText}</div>`;
            marker.bindPopup(popupContent);
        });

        function addCurrentLocation(map) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lon = position.coords.longitude;
                    var marker = L.marker([lat, lon]).addTo(map)
                        .bindPopup('Your current location')
                        .openPopup();
                    map.setView([lat, lon], 13);
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            addCurrentLocation(map);
        });
    </script>
</body>
</html>
